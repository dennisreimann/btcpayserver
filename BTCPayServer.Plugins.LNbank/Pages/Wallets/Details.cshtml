@page "/plugins/lnbank/wallets/{walletId}/details"
@using LNURL
@model BTCPayServer.Plugins.LNbank.Pages.Wallets.DetailsModel

@{
    ViewData.SetActivePage(LNbankNavPages.Wallets, Model.Wallet.Name);
    var endpoint = new Uri($"{Request.Scheme}://{Request.Host}{Request.PathBase.ToUriComponent()}/api/v1/lnbank/lnurl/{Model.Wallet.WalletId}");
    var lnurl = LNURL.EncodeUri(endpoint, "payRequest", true);
}

<partial name="_WalletHeader" model="Model.Wallet"/>

<dl class="row">
    <dt class="col-sm-3 col-xl-2">
        @Html.DisplayNameFor(model => model.Wallet.Name)
    </dt>
    <dd class="col-sm-9 col-xl-10">
        <span id="LNbank-WalletName">@Model.Wallet.Name</span>
        <a asp-page="./Edit" asp-route-walletId="@Model.Wallet.WalletId" class="ms-2">
            Edit
        </a>
    </dd>
    <dt class="col-sm-3 col-xl-2">
        @Html.DisplayNameFor(model => model.Wallet.WalletId)
    </dt>
    <dd class="col-sm-9 col-xl-10" id="LNbank-WalletId">
        @Model.Wallet.WalletId
    </dd>
    @foreach (var accessKey in Model.Wallet.AccessKeys)
    {
        <dt class="col-sm-3 col-xl-2">
            Access Key
        </dt>
        <dd class="col-sm-9 col-xl-10" id="LNbank-WalletAccessKey">
            @accessKey.Key
        </dd>
    }
    <dt class="col-sm-3 col-xl-2">
        @Html.DisplayNameFor(model => model.Wallet.CreatedAt)
    </dt>
    <dd class="col-sm-9 col-xl-10">
        @Model.Wallet.CreatedAt
    </dd>
</dl>

<a href="@lnurl" rel="noreferrer noopener">
    <div class="qrcode my-4">
        @await Component.InvokeAsync("QRCode", new { data = lnurl.ToString().ToUpperInvariant() })
    </div>
</a>

<a asp-page="./Delete" asp-route-walletId="@Model.Wallet.WalletId" class="btn btn-sm btn-outline-danger d-inline-flex align-items-center mx-1">
    Delete Wallet
</a>
